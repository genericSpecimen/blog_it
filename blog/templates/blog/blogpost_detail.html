 
{% extends "base_generic.html" %}

{% block content %}
    <div class="col-md-8 offset-md-2">
        <h1> {{ blogpost.title }} </h1>
        <h6 class="text-muted">
        <a href="{{ blogpost.author.get_absolute_url }}">{{ blogpost.author }}</a> on {{ blogpost.post_date }}
        </h6>
        <p>{{ blogpost.description }}</p>
        <hr>
        <h3>Comments</h3>

        {% if user.is_authenticated %}
        <p class="text-muted"><a href="{% url 'blogcomment-create' blogpost.pk %}">Leave a comment.</a></p>
        {% else %}
        <p class="text-muted"><a href="{% url 'login'%}?next={{request.path}}">Log in</a> to leave a comment.</p>
        {% endif %}

<!--        <div class="list-group list-group-flush">
        {% for comment in blogpost.blogcomment_set.all %}
            <a href="{{ comment.author.get_absolute_url }}" class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1 text-primary">{{ comment.author }}</h6>
                <small class="text-muted">{{ comment.comment_date }}</small>
            </div>
            <p class="mb-1">{{ comment.text}}</p>
            </a>
        {% endfor %}
        </div>-->
        
        {% for comment in blogpost.blogcomment_set.all %}
        <div class="media">
        {% load static %}
        <img class="mr-3" src="{% static 'images/default-avatar.png'%}" width="44" height="44" alt="Default avatar image">
        <div class="media-body mb-1">
            <a href="{{ comment.author.get_absolute_url }}"><p class="mt-0 mb-0 text-primary">{{ comment.author }}</a>
            <small class="text-muted">on {{ comment.comment_date }}</small>
            </p>
            <p class="mt-0 mb-1">{{ comment.text}}</p>
        </div>
        </div>
        {% endfor %}
    </div>
{% endblock %}


